#!/bin/bash


echo "  --> updating go dependencies"

# Update all cli go dependencies

#ORIGINALLY we were doing this go get -u ./cli/main

DEPS="golang.org/x/net/context
github.com/Sirupsen/logrus
gopkg.in/urfave/cli.v2
gopkg.in/yaml.v2
github.com/docker/libcompose
github.com/Jalle19/upcloud-go-sdk/upcloud/
github.com/Jalle19/upcloud-go-sdk/upcloud/client
github.com/rancher/go-rancher/v2
github.com/james-nesbitt/init-go
github.com/wunderkraut/radi-api
github.com/wunderkraut/radi-handlers"


NEWGOPATH="$(mktemp --directory)"
echo " -> using ${NEWGOPATH} as a temporary GOPATH"

for DEP in $DEPS; do
	echo "     - ${DEP}"
	GOPATH="${NEWGOPATH}" go get -u ${DEP}
done

rm -rf "/vendor"
mv "${NEWGOPATH}/src" "./vendor"
rm -rf "${NEWGOPATH}"

echo "  --- Finished dependency update"
